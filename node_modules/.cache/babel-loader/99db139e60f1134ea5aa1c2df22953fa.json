{"remainingRequest":"/Users/zhangoking/study/easyFm/easyFm/node_modules/babel-loader/lib/index.js!/Users/zhangoking/study/easyFm/easyFm/src/utils/template/index.js","dependencies":[{"path":"/Users/zhangoking/study/easyFm/easyFm/src/utils/template/index.js","mtime":1550456287706},{"path":"/Users/zhangoking/study/easyFm/easyFm/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangoking/study/easyFm/easyFm/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _objectSpread from \"/Users/zhangoking/study/easyFm/easyFm/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.number.constructor\";\n\n/**\n * Vue辅助函数\n */\nimport Vue from 'vue';\nimport template from './apptemplate';\nimport { mapState, mapActions } from 'vuex';\nimport _ from 'lodash'; // Vue辅助函数\n\nvar easyFm = {}; // 版本信息\n\neasyFm.version = Number(Vue.version.split('.')[0]); // 模板处理\n\neasyFm.$compile = function (template, options) {\n  return _.template(template)(options);\n};\n\neasyFm.$assign = function (basic, options) {\n  return _.mergeWith(basic, options, function (a, b) {\n    if (_.isArray(a)) {\n      return a.concat(b);\n    }\n  });\n};\n\neasyFm.creatApp = function () {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var basic = {\n    template: template,\n    data: function data() {\n      return {\n        isCollapse: false,\n        mainList: [],\n        leftList: [],\n        mainListStatus: '/',\n        crumbList: []\n      };\n    },\n    computed: _objectSpread({}, mapState(['updateUserInfo'])),\n    methods: {\n      handleSelect: function handleSelect(index) {\n        var pathArr = index.split('/').slice(1, index.split('/').length).map(function (ele) {\n          return '/' + ele;\n        });\n        var newArr = [];\n        var _arr = [];\n        var oldArr = this.mainList; // 扁平化权限列表\n\n        function getArr(arr) {\n          arr.forEach(function (ele) {\n            if (ele.children.length > 0) {\n              newArr.push(ele);\n              getArr(ele.children);\n            } else {\n              newArr.push(ele);\n            }\n          });\n          return newArr;\n        }\n\n        getArr(oldArr);\n\n        for (var i = 0; i < pathArr.length; i++) {\n          var _str = '';\n\n          for (var j = 0; j <= i; j++) {\n            _str += pathArr[j];\n          }\n\n          _arr.push(_str);\n        }\n\n        this.crumbList = _arr.map(function (ele) {\n          return newArr.find(function (item) {\n            if (ele === item.path) {\n              return item.name;\n            }\n          }).name;\n        });\n      }\n    },\n    mounted: function mounted() {\n      this.mainListStatus = this.$route.path;\n      this.mainList = this.updateUserInfo.app_menu;\n\n      for (var key in this.mainList) {\n        if (this.mainList[key].path == this.mainListStatus) {\n          this.leftList = this.mainList[key].children;\n        }\n      }\n    }\n  };\n  return easyFm.$assign(basic, options);\n};\n\nexport default easyFm;",{"version":3,"sources":["/Users/zhangoking/study/easyFm/easyFm/src/utils/template/index.js"],"names":["Vue","template","mapState","mapActions","_","easyFm","version","Number","split","$compile","options","$assign","basic","mergeWith","a","b","isArray","concat","creatApp","data","isCollapse","mainList","leftList","mainListStatus","crumbList","computed","methods","handleSelect","index","pathArr","slice","length","map","ele","newArr","_arr","oldArr","getArr","arr","forEach","children","push","i","_str","j","find","item","path","name","mounted","$route","updateUserInfo","app_menu","key"],"mappings":"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","sourcesContent":["/**\n * Vue辅助函数\n */\nimport Vue from 'vue'\nimport template from './apptemplate'\nimport { mapState, mapActions } from 'vuex'\nimport _ from 'lodash'\n\n// Vue辅助函数\nconst easyFm = {}\n\n// 版本信息\neasyFm.version = Number(Vue.version.split('.')[0])\n\n// 模板处理\neasyFm.$compile = function (template, options) {\n    return _.template(template)(options)\n}\n\neasyFm.$assign = function (basic, options) {\n    return _.mergeWith(basic, options, function (a, b) {\n        if (_.isArray(a)) {\n            return a.concat(b)\n        }\n    })\n}\n\neasyFm.creatApp = function (options = {}) {\n    let basic = {\n\n        template,\n\n        data() {\n            return {\n                isCollapse: false,\n                mainList: [],\n                leftList: [],\n                mainListStatus: '/',\n                crumbList: []\n            }\n        },\n        computed: {\n            ...mapState(['updateUserInfo'])\n        },\n        methods: {\n            handleSelect(index) {\n                let pathArr = index.split('/').slice(1, index.split('/').length).map(ele => '/' + ele)\n                let newArr = [];\n                let _arr = [];\n                let oldArr = this.mainList\n                // 扁平化权限列表\n                function getArr(arr) {\n                    arr.forEach(ele => {\n                        if (ele.children.length > 0) {\n                            newArr.push(ele)\n                            getArr(ele.children)\n                        } else {\n                            newArr.push(ele)\n                        }\n                    })\n                    return newArr\n                }\n                getArr(oldArr)\n                for (let i = 0; i < pathArr.length; i++) {\n                    let _str = ''\n                    for (let j = 0; j <= i; j++) {\n                        _str += pathArr[j]\n                    }\n                    _arr.push(_str)\n                }\n                this.crumbList = _arr.map(ele => {\n                    return newArr.find(item => {\n                        if (ele === item.path) {\n                            return item.name\n                        }\n                    }).name\n                })\n            }\n        },\n        mounted() {\n            this.mainListStatus = this.$route.path\n            this.mainList = this.updateUserInfo.app_menu\n            for (const key in this.mainList) {\n                if (this.mainList[key].path == this.mainListStatus) {\n                    this.leftList = this.mainList[key].children\n                }\n            }\n        }\n    }\n\n    return easyFm.$assign(basic, options)\n\n}\n\n\nexport default easyFm\n"]}]}